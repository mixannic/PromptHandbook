<Window x:Class="PromptHandbook.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Prompt Handbook" Height="600" Width="1200"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style TargetType="TextBox">
            <Setter Property="Padding" Value="4"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#FFABADB3"/>
        </Style>

        <Style TargetType="Button">
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Background" Value="#F0F0F0"/>
            <Setter Property="BorderBrush" Value="#FF707070"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <Style TargetType="ListBoxItem">
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Background" Value="Transparent"/>
        </Style>

        <!-- DataTemplate для папок с иконками и триггерами -->
        <DataTemplate x:Key="FolderTemplate">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <Image Source="{Binding IconPath}" Width="16" Height="16" Margin="0,0,8,0"
                       RenderOptions.BitmapScalingMode="HighQuality"/>
                <TextBlock Text="{Binding Name}" VerticalAlignment="Center">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="FontWeight" Value="Normal"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StackPanel>
        </DataTemplate>
    </Window.Resources>

    <DockPanel>
        <!-- Панель инструментов -->
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Background="#F5F5F5" Height="40">
            <Button Content="Settings" Click="SettingsButton_Click" Width="76"/>
            <Button Content="Add Folder" Click="AddFolderButton_Click" Width="102"/>
            <Button Content="Delete Folder" Click="DeleteFolderButton_Click" Width="102"/>
            <Button Content="Add Prompt" Click="AddButton_Click" Width="102"/>
            <Button Content="Delete Prompt" Click="DeleteButton_Click" Width="102"/>
        </StackPanel>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" MinWidth="150"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="*" MinWidth="200"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="2*" MinWidth="300"/>
            </Grid.ColumnDefinitions>

            <!-- Левая панель - папки -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Заголовок папок -->
                <TextBlock Grid.Row="0" Text="Folders" Margin="5,5,5,2" FontWeight="Bold"/>

                <!-- Список папок -->
                <ListBox Grid.Row="1" Name="FoldersListBox" Margin="5,0,5,5" 
                         SelectionChanged="FoldersListBox_SelectionChanged"
                         ItemTemplate="{StaticResource FolderTemplate}"
                         AllowDrop="True"
                         Drop="FoldersListBox_Drop"
                         DragOver="FoldersListBox_DragOver"
                         MouseDoubleClick="FoldersListBox_MouseDoubleClick"
                         Background="White"
                         BorderThickness="1"
                         BorderBrush="#FFABADB3"/>
            </Grid>

            <!-- Первый разделитель -->
            <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch" 
                         Background="Transparent" Cursor="SizeWE"/>

            <!-- Центральная панель - промпты -->
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Поиск в промптах -->
                <TextBox Grid.Row="0" Name="SearchTextBox" Margin="5" Padding="8,6" 
                         TextChanged="SearchTextBox_TextChanged"/>

                <!-- Список промптов -->
                <ListBox Grid.Row="1" Name="PromptsListBox" Margin="5" 
                         SelectionChanged="PromptsListBox_SelectionChanged"
                         DisplayMemberPath="Name"
                         AllowDrop="True"
                         PreviewMouseLeftButtonDown="PromptsListBox_PreviewMouseLeftButtonDown"
                         PreviewMouseMove="PromptsListBox_PreviewMouseMove"
                         Drop="PromptsListBox_Drop"
                         DragOver="PromptsListBox_DragOver"
                         Background="White"
                         BorderThickness="1"
                         BorderBrush="#FFABADB3"/>
            </Grid>

            <!-- Второй разделитель -->
            <GridSplitter Grid.Column="3" Width="5" HorizontalAlignment="Stretch" 
                         Background="Transparent" Cursor="SizeWE"/>

            <!-- Правая панель - детали -->
            <Grid Grid.Column="4" Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="2*"/>
                </Grid.RowDefinitions>

                <!-- Название промпта -->
                <TextBox Grid.Row="0" Name="NameTextBox" Margin="0,0,0,10" Padding="8,6"
                         LostFocus="NameTextBox_LostFocus" FontWeight="Bold"
                         Background="White" BorderThickness="1" BorderBrush="#FFABADB3"/>

                <!-- Изображение -->
                <Border Grid.Row="1" BorderBrush="#FFABADB3" BorderThickness="1" 
                       Background="#FFF0F0F0" Margin="0,0,0,10">
                    <Grid>
                        <Image Name="DetailImage" Stretch="Uniform"/>
                        <Button Name="LoadImageButton" Content="Load Image" 
                                HorizontalAlignment="Left" VerticalAlignment="Top"
                                Click="LoadImageButton_Click" Padding="10,5" Margin="27,23,0,0"/>
                    </Grid>
                </Border>

                <!-- Описание -->
                <TextBox Grid.Row="2" Name="DescriptionTextBox" 
                        AcceptsReturn="True" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto"
                        LostFocus="DescriptionTextBox_LostFocus"
                        Background="White" BorderThickness="1" BorderBrush="#FFABADB3"/>
            </Grid>
        </Grid>
    </DockPanel>
</Window>